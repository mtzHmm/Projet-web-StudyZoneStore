<div class="w-full h-20 relative bg-transparent">
  <!-- Main Navbar -->
  <nav class="w-full h-full flex items-center justify-between px-4 lg:px-8">
    <!-- Left: Logo -->
    <div class="flex items-center gap-3">
      <img class="w-12 h-9" src="assets/logo/logo-blanc.png" alt="StudyZone Store Logo" />
      <div class="flex flex-col leading-none">
        <span class="text-white text-xl lg:text-2xl font-extrabold font-['Poppins'] uppercase">StudyZone</span>
        <span class="text-white text-sm lg:text-lg font-normal font-['Poppins'] uppercase tracking-wider">STORE</span>
      </div>
    </div>

    <!-- Center: Navigation Links (Desktop) -->
    <div class="hidden md:flex items-center gap-8 lg:gap-12">
      <a routerLink="/" 
         class="text-white text-lg font-medium font-['Poppins'] uppercase hover:text-purple-200 transition-colors" 
         routerLinkActive="text-purple-200">
        Home
      </a>
      <a routerLink="/shop" 
         class="text-white text-lg font-medium font-['Poppins'] uppercase hover:text-purple-200 transition-colors" 
         routerLinkActive="text-purple-200">
        Shop
      </a>
      <a routerLink="/contact" 
         class="text-white text-lg font-medium font-['Poppins'] uppercase hover:text-purple-200 transition-colors" 
         routerLinkActive="text-purple-200">
        Contact
      </a>
    </div>

    <!-- Right: User Info & Cart (Desktop) -->
    <div class="hidden md:flex items-center gap-3 lg:gap-4">
      <!-- User Info avec menu déroulant si connecté -->
      <div class="relative group" *ngIf="currentUser; else loginLink">
        <div class="flex items-center gap-2 cursor-pointer">
          <div class="w-6 h-6 lg:w-8 lg:h-8 bg-white/20 rounded-full flex items-center justify-center">
            <svg class="w-3 h-3 lg:w-4 lg:h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </div>
          <span class="text-white text-sm lg:text-lg font-semibold font-['Poppins'] uppercase">{{ displayName }}</span>
          <svg class="w-3 h-3 text-white ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
        </div>
        
        <!-- Dropdown Menu -->
        <div class="absolute top-full right-0 mt-2 w-48 bg-black/90 backdrop-blur-md rounded-lg shadow-xl border border-white/20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
          <div class="py-2">
            <a routerLink="/user-history" class="block px-4 py-2 text-white hover:bg-white/10 transition-colors font-['Poppins']">
              My Orders
            </a>
            <hr class="my-1 border-white/20">
            <a routerLink="/landing" class="block px-4 py-2 text-white hover:bg-white/10 transition-colors font-['Poppins']">
              Return to Home
            </a>
          </div>
        </div>
      </div>
      
      <!-- Login Link si non connecté -->
      <ng-template #loginLink>
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 lg:w-8 lg:h-8 bg-white/20 rounded-full flex items-center justify-center">
            <svg class="w-3 h-3 lg:w-4 lg:h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </div>
          <a routerLink="/sign-in" class="text-white text-sm lg:text-lg font-semibold font-['Poppins'] uppercase hover:text-purple-200 transition-colors">
            SE CONNECTER
          </a>
        </div>
      </ng-template>
      
      <!-- Admin Dashboard Icon (Always visible) -->
      <button 
        routerLink="/dashboard" 
        class="w-6 h-6 lg:w-8 lg:h-8 bg-white/10 rounded-lg flex items-center justify-center hover:bg-white/20 transition-all duration-200"
        title="Admin Dashboard">
        <svg class="w-4 h-4 lg:w-5 lg:h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
          <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
        </svg>
      </button>

      <!-- Cart Icon -->
      <a routerLink="/cart" class="w-6 h-6 lg:w-8 lg:h-8 bg-white/10 rounded-lg flex items-center justify-center hover:bg-white/20 transition-all duration-200 cursor-pointer"
         title="Shopping Cart"
         [class.relative]="cartItemCount > 0">
        <svg class="w-4 h-4 lg:w-5 lg:h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
          <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
        <!-- Cart item count badge (optional) -->
        <span 
          *ngIf="cartItemCount > 0"
          class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold">
          {{ cartItemCount }}
        </span>
      </a>
    </div>

    <!-- Mobile: Menu Button -->
    <div class="flex md:hidden items-center">
      <button (click)="toggleMobileMenu()" 
              class="text-white hover:text-purple-200 focus:outline-none p-2">
        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
          <path [class.hidden]="isMobileMenuOpen" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          <path [class.hidden]="!isMobileMenuOpen" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu (Hidden by default) -->
  <div [class.hidden]="!isMobileMenuOpen" 
       class="md:hidden absolute top-full left-0 w-full bg-black/95 backdrop-blur-md z-50 border-t border-white/10">
    <div class="px-4 py-6 space-y-4">
      <a routerLink="/" 
         (click)="closeMobileMenu()"
         class="text-white hover:text-purple-200 block px-3 py-3 rounded-md text-lg font-medium font-['Poppins'] uppercase transition-colors">
        HOME
      </a>
      <a routerLink="/shop" 
         (click)="closeMobileMenu()"
         class="text-white hover:text-purple-200 block px-3 py-3 rounded-md text-lg font-medium font-['Poppins'] uppercase transition-colors">
        SHOP
      </a>
      <a routerLink="/contact" 
         (click)="closeMobileMenu()"
         class="text-white hover:text-purple-200 block px-3 py-3 rounded-md text-lg font-medium font-['Poppins'] uppercase transition-colors">
        CONTACT
      </a>
      
      <!-- Mobile User Info -->
      <div class="pt-4 border-t border-white/20">
        <!-- Si l'utilisateur est connecté -->
        <div *ngIf="currentUser; else mobileLoginLink" class="px-3">
          <div class="flex items-center space-x-3 py-2">
            <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
            </div>
            <span class="text-white text-lg font-semibold font-['Poppins'] uppercase">{{ displayName }}</span>
          </div>
          <!-- Menu mobile pour utilisateur connecté -->
          <div class="mt-2 space-y-1">
            <a routerLink="/user-history" 
               (click)="closeMobileMenu()"
               class="text-white hover:text-purple-200 block px-3 py-2 rounded-md text-sm font-medium font-['Poppins'] transition-colors">
              My Orders
            </a>
            <a routerLink="/dashboard" 
               (click)="closeMobileMenu()"
               class="text-white hover:text-purple-200 block px-3 py-2 rounded-md text-sm font-medium font-['Poppins'] transition-colors">
              Admin Dashboard
            </a>
            <a routerLink="/landing" (click)="closeMobileMenu()" 
               class="text-white hover:text-purple-200 block px-3 py-2 rounded-md text-sm font-medium font-['Poppins'] transition-colors">
              Return to Home
            </a>
          </div>
        </div>
        
        <!-- Si l'utilisateur n'est pas connecté -->
        <ng-template #mobileLoginLink>
          <div class="px-3 space-y-2">
            <a routerLink="/sign-in" 
               (click)="closeMobileMenu()"
               class="flex items-center space-x-3 py-2 text-white hover:text-purple-200 transition-colors">
              <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
              </div>
              <span class="text-lg font-semibold font-['Poppins'] uppercase">SE CONNECTER</span>
            </a>
            <a routerLink="/dashboard" 
               (click)="closeMobileMenu()"
               class="text-white hover:text-purple-200 block px-3 py-2 rounded-md text-sm font-medium font-['Poppins'] transition-colors">
              Admin Dashboard
            </a>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
